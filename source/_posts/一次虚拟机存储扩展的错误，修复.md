---
title: 一次LFS虚拟机存储扩展的错误，修复
layour: post
uuid: LFSs-arr-11ed-fasfw-wqr2fg
tags: [LFS]
categories: LFS
date: 2024-10-10 18:07:08
---

背景：LFS需要安装QT。Virtual box

睡前开启了QT的构建，想着应该不会有什么问题。可惜一大早起来就发现虚拟机设置的50G存储已经不够了，这时候就想着要扩展了。

首先我是直接扩原来的硬盘，可惜，当我从原来的大小扩到两倍的时候再次进入系统发现根本没有读取到。这里用过gparted, fdisk, lsblk一系列软件来查看磁盘大小但是没有任何用。

后来我想要我可以新创建一个双倍大小的硬盘然后全部复制过去。想的很美好，我也确实这么做了。这里我用的是Live，挂载一个ISO然后启动在里面打开终端，用Gparted复制旧的到新的。这过程差不多要十分钟。

再后来打算重启，取消掉旧的挂载上新的，发现卡启动光标。我想着应该是**/etc/fstab**这个文件有问题，因为里面指向的不是新的，而是旧的分区，改好，重启。还是卡光标，很奇怪，这是为什么呢？

我又重新的挂载了旧的，没有问题，可以启动。但是我挂载新的就无法启动，这真是奇了怪了。

我就在网上找啊找啊。我突然想起来，当时我在安装LFS的时候好像还设置过一个grub。这个grub来管理我的启动项，我就想着是不是这个问题。我又重新打开了LFS手册，找到了grub所在的位置，重新挂载分区文件，重新修改搜索到文件
 ```
find /boot -name grub.cfg
```
当我打开这个搜索到的文件的时候，我悟了，里面的内容指向的是旧硬盘的分区，而不是我现有的分区。重新修改到正确的，保存，grub-install。重启，发现没有问题，成功扩展和修复我的文件。太棒了

最后说一句：Linux太牛了 :bili_018:

补上扩展后的大小

![](https://img.164314.xyz/2024/10/9bc6c37ace454e896bfb630e0f0136d8.jpg)
